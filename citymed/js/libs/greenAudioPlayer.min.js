!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window).GreenAudioPlayer=e()}(function(){return function n(r,a,o){function s(t,e){if(!a[t]){if(!r[t]){var i="function"==typeof require&&require;if(!e&&i)return i(t,!0);if(l)return l(t,!0);throw(i=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",i}i=a[t]={exports:{}},r[t][0].call(i.exports,function(e){return s(r[t][1][e]||e)},i,i.exports,n,r,a,o)}return a[t].exports}for(var l="function"==typeof require&&require,e=0;e<o.length;e++)s(o[e]);return s}({1:[function(e,t){"use strict";t.exports=e("./src/js/main").default},{"./src/js/main":2}],2:[function(e,t,i){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=[],n=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,a=e}finally{try{n||null==s.return||s.return()}finally{if(r)throw a}}return i}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function n(e,t){for(var i,n=0;n<t.length;n++)(i=t[n]).enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var a,o,s,l=(a=d,s=[{key:"getTemplate",value:function(){return'\n            <div class="loading">\n                <div class="loading__spinner"></div>\n            </div>\n            <div class="play-pause-btn">\n                <svg xmlns="http://www.w3.org/2000/svg" width="18" height="24" viewBox="0 0 18 24">\n                    <path fill="currentColor" fill-rule="evenodd" d="M18 12L0 24V0" class="play-pause-btn__icon"/>\n                </svg>\n            </div>\n    \n            <div class="controls">\n                <span class="controls__current-time">0:00</span>\n                <div class="controls__slider slider" data-direction="horizontal">\n                    <div class="controls__progress gap-progress">\n                        <div class="pin progress__pin" data-method="rewind"></div>\n                    </div>\n                </div>\n                <span class="controls__total-time">0:00</span>\n       \n            <div class="volume">\n                <div class="volume__button">\n                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n                        <path class="volume__speaker" fill="currentColor" fill-rule="evenodd" d="M14.667 0v2.747c3.853 1.146 6.666 4.72 6.666 8.946 0 4.227-2.813 7.787-6.666 8.934v2.76C20 22.173 24 17.4 24 11.693 24 5.987 20 1.213 14.667 0zM18 11.693c0-2.36-1.333-4.386-3.333-5.373v10.707c2-.947 3.333-2.987 3.333-5.334zm-18-4v8h5.333L12 22.36V1.027L5.333 7.693H0z"/>\n                    </svg>\n                </div>\n                <div class="volume__controls hidden">\n                    <div class="volume__slider slider" data-direction="vertical">\n                        <div class="volume__progress gap-progress">\n                            <div class="pin volume__pin" data-method="changeVolume"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n         </div>\n            \n        '}},{key:"formatTime",value:function(e){var t=Math.floor(e/60),e=Math.floor(e%60);return"".concat(t,":").concat(e<10?"0".concat(e):e)}},{key:"pausePlayer",value:function(e){e.parentElement.querySelector(".play-pause-btn__icon").attributes.d.value="M18 12L0 24V0",e.pause()}},{key:"playPlayer",value:function(e){e.parentElement.querySelector(".play-pause-btn__icon").attributes.d.value="M0 0h6v24H0zM12 0h6v24h-6z",e.play()}},{key:"stopOtherPlayers",value:function(){for(var e=document.querySelectorAll(".green-audio-player audio"),t=0;t<e.length;t++)d.pausePlayer(e[t])}}],(o=[{key:"initEvents",value:function(){var e=this,n=this;n.audioPlayer.addEventListener("mousedown",function(e){var t;n.isDraggable(e.target)&&(n.currentlyDragged=e.target,e=n.currentlyDragged.dataset.method,t=n[e].bind(n),window.addEventListener("mousemove",t,!1),window.addEventListener("mouseup",function(){n.currentlyDragged=!1,window.removeEventListener("mousemove",t,!1)},!1))}),n.audioPlayer.addEventListener("touchstart",function(e){var t,i;n.isDraggable(e.target)&&(t=r(e.targetTouches,1),n.currentlyDragged=t[0],t=n.currentlyDragged.target.dataset.method,i=n[t].bind(n),window.addEventListener("touchmove",i,!1),window.addEventListener("touchend",function(){n.currentlyDragged=!1,window.removeEventListener("touchmove",i,!1)},!1),e.preventDefault())}),this.playPauseBtn.addEventListener("click",this.togglePlay.bind(n)),this.player.addEventListener("timeupdate",this.updateProgress.bind(n)),this.player.addEventListener("volumechange",this.updateVolume.bind(n)),this.player.addEventListener("loadedmetadata",function(){e.totalTime.textContent=d.formatTime(n.player.duration)}),this.player.addEventListener("seeking",this.showLoadingIndicator.bind(n)),this.player.addEventListener("seeked",this.hideLoadingIndicator.bind(n)),this.player.addEventListener("canplay",this.hideLoadingIndicator.bind(n)),this.player.addEventListener("ended",function(){d.pausePlayer(n.player),n.player.currentTime=0}),this.volumeBtn.addEventListener("click",function(){n.volumeBtn.classList.toggle("open"),n.volumeControls.classList.toggle("hidden")}),window.addEventListener("resize",n.directionAware.bind(n)),window.addEventListener("scroll",n.directionAware.bind(n));for(var t,i=0;i<this.sliders.length;i++)t=this.sliders[i].querySelector(".pin"),this.sliders[i].addEventListener("click",n[t.dataset.method].bind(n))}},{key:"overcomeIosLimitations",value:function(){(window.navigator.userAgent.match(/iPad/i)||window.navigator.userAgent.match(/iPhone/i))&&(this.player.addEventListener("loadedmetadata",this.hideLoadingIndicator.bind(this)),this.audioPlayer.querySelector(".volume").style.display="none",this.audioPlayer.querySelector(".controls").style.marginRight="0")}},{key:"isDraggable",value:function(e){var t=!1;if(void 0===e.classList)return!1;for(var i=0;i<this.draggableClasses.length;i++)e.classList.contains(this.draggableClasses[i])&&(t=!0);return t}},{key:"inRange",value:function(e){var t="touches"in e,i=this.getRangeBox(e),n=i.getBoundingClientRect(),r=null,a=null;if("horizontal"===i.dataset.direction){a=(r=n.x)+n.width;i=(t?e.touches[0]:e).clientX;if(i<r||a<i)return!1}else{a=(r=n.top)+n.height;e=(t?e.touches[0]:e).clientY;if(e<r||a<e)return!1}return!0}},{key:"updateProgress",value:function(){var e=this.player.currentTime,t=e/this.player.duration*100;this.progress.style.width="".concat(t,"%"),this.currentTime.textContent=d.formatTime(e)}},{key:"updateVolume",value:function(){this.volumeProgress.style.height="".concat(100*this.player.volume,"%"),.5<=this.player.volume?this.speaker.attributes.d.value="M14.667 0v2.747c3.853 1.146 6.666 4.72 6.666 8.946 0 4.227-2.813 7.787-6.666 8.934v2.76C20 22.173 24 17.4 24 11.693 24 5.987 20 1.213 14.667 0zM18 11.693c0-2.36-1.333-4.386-3.333-5.373v10.707c2-.947 3.333-2.987 3.333-5.334zm-18-4v8h5.333L12 22.36V1.027L5.333 7.693H0z":this.player.volume<.5&&.05<this.player.volume?this.speaker.attributes.d.value="M0 7.667v8h5.333L12 22.333V1L5.333 7.667M17.333 11.373C17.333 9.013 16 6.987 14 6v10.707c2-.947 3.333-2.987 3.333-5.334z":this.player.volume<=.05&&(this.speaker.attributes.d.value="M0 7.667v8h5.333L12 22.333V1L5.333 7.667")}},{key:"getRangeBox",value:function(e){var t=e.target,i=this.currentlyDragged;return"click"===e.type&&this.isDraggable(e.target)&&(t=e.target.parentElement.parentElement),"mousemove"===e.type&&(t=i.parentElement.parentElement),"touchmove"===e.type&&(t=i.target.parentElement.parentElement),t}},{key:"getCoefficient",value:function(e){var t="touches"in e,i=this.getRangeBox(e),n=i.getBoundingClientRect(),r=0;return"horizontal"===i.dataset.direction?r=((t?e.touches[0]:e).clientX-n.left)/n.width:"vertical"===i.dataset.direction&&(i=n.height,r=1-((t?e.touches[0]:e).clientY-n.top)/i),r}},{key:"rewind",value:function(e){this.inRange(e)&&(this.player.currentTime=this.player.duration*this.getCoefficient(e))}},{key:"changeVolume",value:function(e){this.inRange(e)&&(this.player.volume=Math.round(10*this.getCoefficient(e))/10)}},{key:"togglePlay",value:function(){this.player.paused?(this.stopOthersOnPlay&&d.stopOtherPlayers(),d.playPlayer(this.player)):d.pausePlayer(this.player)}},{key:"showLoadingIndicator",value:function(){this.playPauseBtn.style.display="none",this.loading.style.display="block"}},{key:"hideLoadingIndicator",value:function(){this.playPauseBtn.style.display="block",this.loading.style.display="none"}},{key:"directionAware",value:function(){this.volumeControls.classList.remove("top","middle","bottom"),window.innerHeight<250?this.volumeControls.classList.add("middle"):this.audioPlayer.getBoundingClientRect().top<180?this.volumeControls.classList.add("bottom"):this.volumeControls.classList.add("top")}}])&&n(a.prototype,o),s&&n(a,s),d);function d(e,t){(function(e){if(!(e instanceof d))throw new TypeError("Cannot call a class as a function")})(this),this.audioPlayer=e;e=this.audioPlayer.innerHTML;this.audioPlayer.classList.add("green-audio-player"),this.audioPlayer.innerHTML=d.getTemplate()+e,this.playPauseBtn=this.audioPlayer.querySelector(".play-pause-btn"),this.loading=this.audioPlayer.querySelector(".loading"),this.sliders=this.audioPlayer.querySelectorAll(".slider"),this.progress=this.audioPlayer.querySelector(".controls__progress"),this.volumeBtn=this.audioPlayer.querySelector(".volume__button"),this.volumeControls=this.audioPlayer.querySelector(".volume__controls"),this.volumeProgress=this.volumeControls.querySelector(".volume__progress"),this.player=this.audioPlayer.querySelector("audio"),this.currentTime=this.audioPlayer.querySelector(".controls__current-time"),this.totalTime=this.audioPlayer.querySelector(".controls__total-time"),this.speaker=this.audioPlayer.querySelector(".volume__speaker"),this.draggableClasses=["pin"],this.currentlyDragged=null,this.stopOthersOnPlay=(t||{}).stopOthersOnPlay||!1,this.initEvents(),this.directionAware(),this.overcomeIosLimitations()}i.default=l},{}]},{},[1])(1)});