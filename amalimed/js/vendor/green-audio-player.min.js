(function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window,b.GreenAudioPlayer=a()}})(function(){return function(){function b(d,e,g){function a(j,i){if(!e[j]){if(!d[j]){var f="function"==typeof require&&require;if(!i&&f)return f(j,!0);if(h)return h(j,!0);var c=new Error("Cannot find module '"+j+"'");throw c.code="MODULE_NOT_FOUND",c}var k=e[j]={exports:{}};d[j][0].call(k.exports,function(b){var c=d[j][1][b];return a(c||b)},k,k.exports,b,d,e,g)}return e[j].exports}for(var h="function"==typeof require&&require,c=0;c<g.length;c++)a(g[c]);return a}return b}()({1:[function(a,b){"use strict";b.exports=a("./src/js/main")["default"]},{"./src/js/main":2}],2:[function(a,b,c){"use strict";function d(a,b){return g(a)||f(a,b)||e()}function e(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function f(a,b){var c=[],d=!0,e=!1,f=void 0;try{for(var g,h=a[Symbol.iterator]();!(d=(g=h.next()).done)&&(c.push(g.value),!(b&&c.length===b));d=!0);}catch(a){e=!0,f=a}finally{try{d||null==h["return"]||h["return"]()}finally{if(e)throw f}}return c}function g(a){if(Array.isArray(a))return a}function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function i(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function j(a,b,c){return b&&i(a.prototype,b),c&&i(a,c),a}Object.defineProperty(c,"__esModule",{value:!0}),c["default"]=void 0;var k=function(){function a(b,c){h(this,a),this.audioPlayer=b;var d=this.audioPlayer.innerHTML;this.audioPlayer.classList.add("green-audio-player"),this.audioPlayer.innerHTML=a.getTemplate()+d,this.playPauseBtn=this.audioPlayer.querySelector(".play-pause-btn"),this.loading=this.audioPlayer.querySelector(".loading"),this.sliders=this.audioPlayer.querySelectorAll(".slider"),this.progress=this.audioPlayer.querySelector(".controls__progress"),this.volumeBtn=this.audioPlayer.querySelector(".volume__button"),this.volumeControls=this.audioPlayer.querySelector(".volume__controls"),this.volumeProgress=this.volumeControls.querySelector(".volume__progress"),this.player=this.audioPlayer.querySelector("audio"),this.currentTime=this.audioPlayer.querySelector(".controls__current-time"),this.totalTime=this.audioPlayer.querySelector(".controls__total-time"),this.speaker=this.audioPlayer.querySelector(".volume__speaker"),this.draggableClasses=["pin"],this.currentlyDragged=null,this.stopOthersOnPlay=(c||{}).stopOthersOnPlay||!1,this.initEvents(),this.directionAware(),this.overcomeIosLimitations()}return j(a,[{key:"initEvents",value:function(){var b=this,c=this;c.audioPlayer.addEventListener("mousedown",function(a){if(c.isDraggable(a.target)){c.currentlyDragged=a.target;var b=c.currentlyDragged.dataset.method,d=c[b].bind(c);window.addEventListener("mousemove",d,!1),window.addEventListener("mouseup",function(){c.currentlyDragged=!1,window.removeEventListener("mousemove",d,!1)},!1)}}),c.audioPlayer.addEventListener("touchstart",function(a){if(c.isDraggable(a.target)){var b=d(a.targetTouches,1);c.currentlyDragged=b[0];var e=c.currentlyDragged.target.dataset.method,f=c[e].bind(c);window.addEventListener("touchmove",f,!1),window.addEventListener("touchend",function(){c.currentlyDragged=!1,window.removeEventListener("touchmove",f,!1)},!1),a.preventDefault()}}),this.playPauseBtn.addEventListener("click",this.togglePlay.bind(c)),this.player.addEventListener("timeupdate",this.updateProgress.bind(c)),this.player.addEventListener("volumechange",this.updateVolume.bind(c)),this.player.addEventListener("loadedmetadata",function(){b.totalTime.textContent=a.formatTime(c.player.duration)}),this.player.addEventListener("seeking",this.showLoadingIndicator.bind(c)),this.player.addEventListener("seeked",this.hideLoadingIndicator.bind(c)),this.player.addEventListener("canplay",this.hideLoadingIndicator.bind(c)),this.player.addEventListener("ended",function(){a.pausePlayer(c.player),c.player.currentTime=0}),this.volumeBtn.addEventListener("click",function(){c.volumeBtn.classList.toggle("open"),c.volumeControls.classList.toggle("hidden")}),window.addEventListener("resize",c.directionAware.bind(c)),window.addEventListener("scroll",c.directionAware.bind(c));for(var e,f=0;f<this.sliders.length;f++)e=this.sliders[f].querySelector(".pin"),this.sliders[f].addEventListener("click",c[e.dataset.method].bind(c))}},{key:"overcomeIosLimitations",value:function(){var a=this;(window.navigator.userAgent.match(/iPad/i)||window.navigator.userAgent.match(/iPhone/i))&&(this.player.addEventListener("loadedmetadata",this.hideLoadingIndicator.bind(a)),this.audioPlayer.querySelector(".volume").style.display="none",this.audioPlayer.querySelector(".controls").style.marginRight="0")}},{key:"isDraggable",value:function(a){var b=!1;if("undefined"==typeof a.classList)return!1;for(var c=0;c<this.draggableClasses.length;c++)a.classList.contains(this.draggableClasses[c])&&(b=!0);return b}},{key:"inRange",value:function(a){var b=("touches"in a),c=this.getRangeBox(a),d=c.getBoundingClientRect(),e=c.dataset.direction,f=null,g=null;if("horizontal"===e){f=d.x,g=f+d.width;var h=b?a.touches[0].clientX:a.clientX;if(h<f||h>g)return!1}else{f=d.top,g=f+d.height;var i=b?a.touches[0].clientY:a.clientY;if(i<f||i>g)return!1}return!0}},{key:"updateProgress",value:function(){var b=this.player.currentTime,c=100*(b/this.player.duration);this.progress.style.width="".concat(c,"%"),this.currentTime.textContent=a.formatTime(b)}},{key:"updateVolume",value:function(){this.volumeProgress.style.height="".concat(100*this.player.volume,"%"),.5<=this.player.volume?this.speaker.attributes.d.value="M14.667 0v2.747c3.853 1.146 6.666 4.72 6.666 8.946 0 4.227-2.813 7.787-6.666 8.934v2.76C20 22.173 24 17.4 24 11.693 24 5.987 20 1.213 14.667 0zM18 11.693c0-2.36-1.333-4.386-3.333-5.373v10.707c2-.947 3.333-2.987 3.333-5.334zm-18-4v8h5.333L12 22.36V1.027L5.333 7.693H0z":.5>this.player.volume&&.05<this.player.volume?this.speaker.attributes.d.value="M0 7.667v8h5.333L12 22.333V1L5.333 7.667M17.333 11.373C17.333 9.013 16 6.987 14 6v10.707c2-.947 3.333-2.987 3.333-5.334z":.05>=this.player.volume&&(this.speaker.attributes.d.value="M0 7.667v8h5.333L12 22.333V1L5.333 7.667")}},{key:"getRangeBox",value:function(a){var b=a.target,c=this.currentlyDragged;return"click"===a.type&&this.isDraggable(a.target)&&(b=a.target.parentElement.parentElement),"mousemove"===a.type&&(b=c.parentElement.parentElement),"touchmove"===a.type&&(b=c.target.parentElement.parentElement),b}},{key:"getCoefficient",value:function(a){var b=("touches"in a),c=this.getRangeBox(a),d=c.getBoundingClientRect(),e=0;if("horizontal"===c.dataset.direction){var f=b?a.touches[0].clientX:a.clientX,g=f-d.left,h=d.width;e=g/h}else if("vertical"===c.dataset.direction){var i=d.height,j=b?a.touches[0].clientY:a.clientY,k=j-d.top;e=1-k/i}return e}},{key:"rewind",value:function(a){this.inRange(a)&&(this.player.currentTime=this.player.duration*this.getCoefficient(a))}},{key:"changeVolume",value:function(a){this.inRange(a)&&(this.player.volume=Math.round(10*this.getCoefficient(a))/10)}},{key:"togglePlay",value:function(){this.player.paused?(this.stopOthersOnPlay&&a.stopOtherPlayers(),a.playPlayer(this.player)):a.pausePlayer(this.player)}},{key:"showLoadingIndicator",value:function(){this.playPauseBtn.style.display="none",this.loading.style.display="block"}},{key:"hideLoadingIndicator",value:function(){this.playPauseBtn.style.display="block",this.loading.style.display="none"}},{key:"directionAware",value:function(){this.volumeControls.classList.remove("top","middle","bottom"),250>window.innerHeight?this.volumeControls.classList.add("middle"):180>this.audioPlayer.getBoundingClientRect().top?this.volumeControls.classList.add("bottom"):this.volumeControls.classList.add("top")}}],[{key:"getTemplate",value:function(){return"\n            <div class=\"loading\">\n                <div class=\"loading__spinner\"></div>\n            </div>\n            <div class=\"play-pause-btn\">\n                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"18\" height=\"24\" viewBox=\"0 0 18 24\">\n                    <path fill=\"#566574\" fill-rule=\"evenodd\" d=\"M18 12L0 24V0\" class=\"play-pause-btn__icon\"/>\n                </svg>\n            </div>\n    \n            <div class=\"controls\">\n                <span class=\"controls__current-time\">0:00</span>\n                <div class=\"controls__slider slider\" data-direction=\"horizontal\">\n                    <div class=\"controls__progress gap-progress\">\n                        <div class=\"pin progress__pin\" data-method=\"rewind\"></div>\n                    </div>\n                </div>\n                <span class=\"controls__total-time\">0:00</span>\n            </div>\n    \n            <div class=\"volume\">\n                <div class=\"volume__button\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\">\n                        <path class=\"volume__speaker\" fill=\"#566574\" fill-rule=\"evenodd\" d=\"M14.667 0v2.747c3.853 1.146 6.666 4.72 6.666 8.946 0 4.227-2.813 7.787-6.666 8.934v2.76C20 22.173 24 17.4 24 11.693 24 5.987 20 1.213 14.667 0zM18 11.693c0-2.36-1.333-4.386-3.333-5.373v10.707c2-.947 3.333-2.987 3.333-5.334zm-18-4v8h5.333L12 22.36V1.027L5.333 7.693H0z\"/>\n                    </svg>\n                </div>\n                <div class=\"volume__controls hidden\">\n                    <div class=\"volume__slider slider\" data-direction=\"vertical\">\n                        <div class=\"volume__progress gap-progress\">\n                            <div class=\"pin volume__pin\" data-method=\"changeVolume\"></div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n            \n        "}},{key:"formatTime",value:function(a){var b=Math.floor(a/60),c=Math.floor(a%60);return"".concat(b,":").concat(10>c?"0".concat(c):c)}},{key:"pausePlayer",value:function(a){var b=a.parentElement.querySelector(".play-pause-btn__icon");b.attributes.d.value="M18 12L0 24V0",a.pause()}},{key:"playPlayer",value:function(a){var b=a.parentElement.querySelector(".play-pause-btn__icon");b.attributes.d.value="M0 0h6v24H0zM12 0h6v24h-6z",a.play()}},{key:"stopOtherPlayers",value:function(){for(var b=document.querySelectorAll(".green-audio-player audio"),c=0;c<b.length;c++)a.pausePlayer(b[c])}}]),a}();c["default"]=k},{}]},{},[1])(1)});